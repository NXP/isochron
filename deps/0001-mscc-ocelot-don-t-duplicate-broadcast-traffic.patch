From 6a585bc218f447a4811c0d78965c75229ae63bd3 Mon Sep 17 00:00:00 2001
From: Alex Marginean <alexandru.marginean@nxp.com>
Date: Wed, 17 Apr 2019 16:43:00 +0300
Subject: [PATCH] mscc: ocelot: don't duplicate broadcast traffic

Signed-off-by: Alex Marginean <alexandru.marginean@nxp.com>
---
 drivers/net/ethernet/mscc/felix_board.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/net/ethernet/mscc/felix_board.c b/drivers/net/ethernet/mscc/felix_board.c
index b4c45c20be7c..a469a19835f6 100644
--- a/drivers/net/ethernet/mscc/felix_board.c
+++ b/drivers/net/ethernet/mscc/felix_board.c
@@ -296,6 +296,8 @@ static rx_handler_result_t felix_frm_ext_handler(struct sk_buff **pskb)
 		shhwtstamps->hwtstamp = tstamp_in_ns;
 	}
 
+	if (ocelot->bridge_mask & BIT(p))
+		skb->offload_fwd_mark = 1;
 	netif_rx(skb);
 
 	return RX_HANDLER_CONSUMED;
-- 
2.7.4

